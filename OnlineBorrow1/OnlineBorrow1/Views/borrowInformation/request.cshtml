@model IEnumerable<OnlineBorrow1.Models.borrowInformation>
@{
    ViewBag.Title = "实验室借用申请";
}

<script src="~/Scripts/request.js"></script>
<style>
    td { font-size: 18.7px; }
</style>

<div class="container" style="border: 1px solid #ddd; background-color: white">
    <div class="row clearfix">
        <div class="col-md-12 column">
            <div class="jumbotron" style="margin-top: 20px; padding-left: 0px">
                <h2>温馨提示！！！
                </h2>
                <p>
                    请在机房使用完后,桌椅恢复原位,做好机房的卫生工作
                </p>
            </div>


            <style>
                td { text-align: center; vertical-align: middle; }
            </style>

            <form action="@Url.Content("~/borrowInformation/SaveInformation")" method="post">
                <table class="table table-bordered table-hover element.style" style="border-radius: 10px; border: 1px solid black">
                    <caption style="text-align: center; font-size: 40px; color: black; font-weight: bolder">
                        青海大学计算机技术与应用系教学机房借用审批表<br />
                        2016 —— 2017学年度 第一学期      
                    </caption>
                    <tbody>
                        <tr>
                            <td class="col-md-2">单位名称
                            </td>
                            <td class="col-md-2" style="padding: 0">
                                <input type="text" name="单位名称" id="单位名称" required style="border: none; width: 100%; height: 45px; text-align: center" />
                            </td>
                            <td class="col-md-2">借用人
                            </td>
                            <td class="col-md-2" style="padding: 0">
                                <input type="text" name="借用人" id="借用人" required style="border: none; width: 100%; height: 45px; text-align: center" />
                            </td>
                            <td class="col-md-2">联系电话
                            </td>
                            <td class="col-md-2" style="padding: 0">
                                <input type="text" name="联系电话" id="联系电话" required style="border: none; width: 100%; height: 45px; text-align: center" />
                            </td>
                        </tr>
                        <tr>
                            <td class="col-md-2">借用人身份
                            </td>
                            <td class="col-md-2" style="padding-top: 10px">
                                <input type="radio" name="statis" class="myradio" value="教师" onclick="$('#category').val('教师')" checked="checked">教师
                            <input type="radio" name="statis" class="myradio" value="学生" onclick="$('#category').val('学生')">学生
                            <input type="hidden" name="借用人身份" id="category" value="教师" />
                            </td>
                            <td class="col-md-2" style="padding-top: 10px">所在班级(学生填写)                                
                            </td>
                            <td class="col-md-2" style="padding: 0">
                                <input type="text" name="所在班级" id="所在班级" style="border: none; width: 100%; height: 45px; text-align: center" />
                            </td>
                            <td class="col-md-2" style="padding-top: 10px">学号(学生填写)                      
                            </td>
                            <td class="col-md-2" style="padding: 0">
                                <input type="text" name="学号" id="学号" style="border: none; width: 100%; height: 45px; text-align: center" />
                            </td>
                        </tr>
                        <tr>
                            <td rowspan="2" style="padding-top: 80px">借用机房目的及具体内容                              
                            </td>
                            <td>用途
                            </td>
                            <td colspan="2" style="padding: 0">
                                <select name="用途" style="border: none; width: 100%; height: 45px;">
                                    <option value="补课" style="text-align: center;">补课</option>
                                    <option value="学生活动">学生活动</option>
                                    <option value="考试">考试</option>
                                    <option value="承办竞赛/培训">承办竞赛/培训</option>
                                    <option value="讲座/学术报告">讲座/学术报告</option>
                                </select>
                            </td>
                            <td>其他
                            </td>
                            <td style="padding: 0">
                                <input type="text" name="其它" id="其它" style="border: none; width: 100%; height: 45px;" />
                            </td>
                        </tr>
                        <tr>
                            <td style="padding-top: 50px">具体内容描述                                
                            </td>
                            <td colspan="4" style="padding: 0">
                                <textarea name="具体内容描述" id="具体内容描述" style="border: none; resize: none; width: 100%; height: 208px; padding: 0px; margin: 0px;">
                            </textarea>
                            </td>
                        </tr>

                        <tr>
                            <td>借用机房
                            </td>
                            <td style="padding: 0">
                                <select name="借用机房" id="借用机房" style="border: none; width: 100%; height: 45px;">
                                    <option value="计121">计121</option>
                                    <option value="计223">计223</option>
                                    <option value="计315">计315</option>
                                    <option value="计310">计310</option>
                                    <option value="计321">计321</option>
                                </select>
                            </td>
                            <td>借用时间
                            </td>
                            <td style="padding: 0; text-align: center;">
                                <input type="text" name="借用具体时间始" id="借用具体时间始" style="border: none; width: 100%; height: 45px;" onfocus="HS_setDate(this)" />
                            </td>
                            <td style="padding: 0; text-align: center;">
                                <a class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" onclick="FillCourseInfo()" style="height: 45px; width: 100%; padding-top: 8px; padding-bottom: 0px">当天课表查询
                                </a>

                            </td>
                            <td style="padding: 0; text-align: center;">
                                <select name="借用具体时间终" style="border: none; width: 100%; height: 45px;">
                                    <option value="第一节" style="text-align: center;">第一节</option>
                                    <option value="第二节">第二节</option>
                                    <option value="第三节">第三节</option>
                                    <option value="第四节">第四节</option>
                                    <option value="中午休息">中午休息</option>
                                    <option value="第五节">第五节</option>
                                    <option value="第六节">第六节</option>
                                    <option value="第七节">第七节</option>
                                    <option value="第八节">第八节</option>
                                    <option value="下午休息">下午休息</option>
                                    <option value="第九节">第九节</option>
                                    <option value="第十节">第十节</option>
                                    <option value="第十一节">第十一节</option>
                                </select>

                            </td>
                        </tr>
                    </tbody>
                </table>

                <button type="submit" class="btn btn-primary btn-lg" style="float: right">提交信息</button>

            </form>
        </div>

        <div style="margin-bottom: 20px">
            <h3>备注:</h3>
            <ol>
                <li>此申请表由借用人如实逐项填写，报计算机系实验室管理部审批（补课以及党团、班级、学生会、腾讯俱乐部、辩论赛等活动借用情况只需系实验室管理部审核，如遇承办考试、竞赛、讲座、培训、项目活动等特殊情况需报系领导审批）；审批通过后，持本表到计算机系楼门卫处领取相应机房的钥匙；
                </li>
                <li>教室借用，必须遵守计算机系教学机房管理规定，违反规定者，将取消其使用资格，性质严重者，将上报系里处理；
                </li>
                <li>未办理教室借用手续或擅自延长使用者，一经发现，将承担相关责任；
                </li>
                <li>教室用毕，须将桌椅恢复原位，保持室内清洁。
                </li>

            </ol>
            <p style="text-align: right">系教学实验室联系人：杜正君（13897408428）</p>
        </div>
    </div>
</div>


<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">欢迎您，
                                                    
                                                        <span>借用日期:</span><span class="date" id="date_" style="color: red;"></span>



                    <span>第</span><!--<span id="weekCount" style="color: red;"></span>-->@Request.Cookies["weekIndex"].Value<span>周</span>

                </h4>
            </div>
            <div class="modal-body" style="padding: 0px;">




                @for (int i = 1; i <= 8; i++)
                {
                                                    
                    <div class="col-md-2  column" style="border: 1px dashed #ddd; text-align: left;"><span>第@(i)节:</span></div>
                                                    
                    <div class="col-md-10 column" style="border: 1px dashed #ddd; text-align: left;"><span id="cindex@(i)" style="color:green;"></span></div>
                }
                <div style="clear: both"></div>
            </div>
            <!--
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">
                                                    关闭
                                                </button>
                                                <button type="button" class="btn btn-primary">
                                                    提交更改
                                                </button>
                                            </div>
                                                -->
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal -->
</div>
<!--
                                <asp:HiddenField ID="hfddlList" runat="server" Value='{k:1,v:"南京"}|{k:2,v:"上海"}|{k:3,v:"扬州"}|{k:4,v:"苏州"}|{k:5,v:"无锡"}|{k:6,v:"常州"}|{k:7,v:"盐城"}|{k:8,v:"徐州"}|{k:9,v:"泰州"}|{k:10,v:"淮安"}' />
                                   
        <div class="testContainer">
            <br />
            <br />
            <br />
            <br />
            <div style="margin-left: 300px; height: 30px;">
                <asp:TextBox ID="txtTest" runat="server" Width="150px"></asp:TextBox>
                <asp:HiddenField ID="hfTest" runat="server" Value="3,5" />
            </div>
        </div>
                                     -->

<script>
    function FillCourseInfo() {
        jQuery.ajax({
            type: "POST",
            url: "@Url.Content("~/CheckSchedule/CheckSchedule")",
            data: { 借用机房: $("#借用机房").val(), 借用日期: $("#借用具体时间始").val() },
            dataType: "json",

            success: function (data) {

                $("#cindex1").text(data.cindex1 + " ");
                $("#cindex2").text(data.cindex2 + " ");
                $("#cindex3").text(data.cindex3 + " ");
                $("#cindex4").text(data.cindex4 + " ");
                $("#cindex5").text(data.cindex5 + " ");
                $("#cindex6").text(data.cindex6 + " ");
                $("#cindex7").text(data.cindex7 + " ");
                $("#cindex8").text(data.cindex8 + " ");
                $(".date").text($("#借用具体时间始").val());

                /* 你是说分页显示？ 这个我自己实现过，分页我写好了   但是我得给你讲讲 你才能懂，可以，ok，大可不必，待会你远程看看我的分页，好
                */

            },

            error: function () {
                alert("error");
            }
        });

    }
</script>

<script>

    /*
 
     (function ($) {
         $.fn.extend({
             MultDropList: function (options) {
                 var op = $.extend({ wraperClass: "wraper", width: "150px", height: "200px", data: "", selected: "" }, options);
                 return this.each(function () {
                     var $this = $(this); //指向TextBox
                     var $hf = $(this).next(); //指向隐藏控件存
                     var conSelector = "#" + $this.attr("id") + ",#" + $hf.attr("id");
                     var $wraper = $(conSelector).wrapAll("<div><div></div></div>").parent().parent().addClass(op.wraperClass);
 
                     var $list = $('<div class="list"></div>').appendTo($wraper);
                     $list.css({ "width": op.width, "height": op.height });
                     //控制弹出页面的显示与隐藏
                     $this.click(function (e) {
                         $(".list").hide();
                         $list.toggle();
                         e.stopPropagation();
                     });
 
                     $(document).click(function () {
                         $list.hide();
                     });
 
                     $list.filter("*").click(function (e) {
                         e.stopPropagation();
                     });
                     //加载默认数据
                     $list.append('<ul><li><input type="checkbox" class="selectAll" value="" /><span>全部</span></li></ul>');
                     var $ul = $list.find("ul");
 
                     //加载json数据
                     var listArr = op.data.split("|");
                     var jsonData;
                     for (var i = 0; i < listArr.length; i++) {
                         jsonData = eval("(" + listArr[i] + ")");
                         $ul.append('<li><input type="checkbox" value="' + jsonData.k + '" /><span>' + jsonData.v + '</span></li>');
                     }
 
                     //加载勾选项
                     var seledArr;
                     if (op.selected.length > 0) {
                         seledArr = selected.split(",");
                     }
                     else {
                         seledArr = $hf.val().split(",");
                     }
 
                     $.each(seledArr, function (index) {
                         $("li input[value='" + seledArr[index] + "']", $ul).attr("checked", "checked");
 
                         var vArr = new Array();
                         $("input[class!='selectAll']:checked", $ul).each(function (index) {
                             vArr[index] = $(this).next().text();
                         });
                         $this.val(vArr.join(","));
                     });
                     //全部选择或全不选
                     $("li:first input", $ul).click(function () {
                         if ($(this).attr("checked")) {
                             $("li input", $ul).attr("checked", "checked");
                         }
                         else {
                             $("li input", $ul).removeAttr("checked");
                         }
                     });
                     //点击其它复选框时，更新隐藏控件值,文本框的值
                     $("input", $ul).click(function () {
                         var kArr = new Array();
                         var vArr = new Array();
                         $("input[class!='selectAll']:checked", $ul).each(function (index) {
                             kArr[index] = $(this).val();
                             vArr[index] = $(this).next().text();
                         });
                         $hf.val(kArr.join(","));
                         $this.val(vArr.join(","));
                     });
                 });
             }
         });
     })(jQuery);
     $(document).ready(function () {
         $("#txtTest").MultDropList({ data: $("#hfddlList").val() });
     });
     */


</script>
