@model IEnumerable<OnlineBorrow1.Models.borrowInformation>
@{
    ViewBag.Title = "实验室借用申请";
}


<link rel="stylesheet" href="~/assets/bootstrap/css/bootstrap-select.css">
<script type="text/javascript" src="~/assets/bootstrap/js/bootstrap-select.js"></script>
<script src="~/Scripts/request.js"></script>

<style>
    td.strong { font-size: 18.7px; text-align: left; vertical-align: middle; font-family: 宋体; font-weight: bold; }
    td.input { font-size: 18.7px; text-align: left; vertical-align: middle; font-family: 宋体; }
    input { text-align: left; }
</style>


<div class="container" style="border: 1px solid #ddd; background-color: white">
    <div class="row clearfix">
        <div class="col-md-12 column">
            <div class="jumbotron" style="margin-top: 10px; padding-left: 0px; padding-top: 10px; padding-bottom: 10px;">
                <h2 style="color: red;"><i class="icon-quote-left icon-large"></i>&nbsp;&nbsp;温馨提示：请在机房使用完后,桌椅恢复原位,做好机房的卫生工作!&nbsp;&nbsp;<i class="icon-quote-right icon-large"></i></h2>
            </div>
            <form action="@Url.Content("~/borrowInformation/SaveInformation")" method="post">
                <table class="table table-bordered table-hover element.style" style="border-radius: 10px; border: 1px solid black">
                    <caption style="text-align: center; font-size: 40px; color: black; font-weight: bolder">
                        青海大学计算机技术与应用系教学机房借用审批表<br />
                        2016 —— 2017学年度 第一学期      
                    </caption>
                    <tbody>
                        <tr>
                            <td class="col-md-2 strong">单位名称
                            </td>
                            <td class="col-md-2 input" style="padding: 0">
                                <input type="text" name="单位名称" id="单位名称" required style="border: none; width: 100%; height: 45px;" />
                            </td>
                            <td class="col-md-2 strong">借用人
                            </td>
                            <td class="col-md-2 input" style="padding: 0">
                                <input type="text" name="借用人" id="借用人" required style="border: none; width: 100%; height: 45px;" />
                            </td>
                            <td class="col-md-2 strong">联系电话
                            </td>
                            <td class="col-md-2 input" style="padding: 0">
                                <input type="text" name="联系电话" id="联系电话" required style="border: none; width: 100%; height: 45px;" />
                            </td>
                        </tr>
                        <tr>
                            <td class="col-md-2 strong">借用人身份
                            </td>
                            <td class="col-md-2 input" style="padding-top: 10px">
                                <input type="radio" name="statis" class="myradio" value="教师" onclick="$('#category').val('教师')" checked="checked">教师
                            <input type="radio" name="statis" class="myradio" value="学生" onclick="$('#category').val('学生')">学生
                            <input type="hidden" name="借用人身份" id="category" value="教师" />
                            </td>
                            <td class="col-md-2 strong" style="padding-top: 10px">所在班级(学生)                                
                            </td>
                            <td class="col-md-2 input" style="padding: 0">
                                <input type="text" name="所在班级" id="所在班级" style="border: none; width: 100%; height: 45px;" />
                            </td>
                            <td class="col-md-2 strong" style="padding-top: 10px">学号(学生)                      
                            </td>
                            <td class="col-md-2 input" style="padding: 0">
                                <input type="text" name="学号" id="学号" style="border: none; width: 100%; height: 45px;" />
                            </td>
                        </tr>
                        <tr>
                            <td class="strong" rowspan="2" style="padding-top: 80px">借用机房目的及具体内容                              
                            </td>
                            <td class="strong">用途
                            </td>
                            <td class="input" colspan="2" style="padding: 0">
                                <select name="用途" style="border: none; width: 100%; height: 45px; padding-left: 4px;">
                                    <option value="补课" style="text-align: center;">补课</option>
                                    <option value="学生活动">学生活动</option>
                                    <option value="考试">考试</option>
                                    <option value="承办竞赛/培训">承办竞赛/培训</option>
                                    <option value="讲座/学术报告">讲座/学术报告</option>
                                </select>
                            </td>
                            <td class="strong">其他
                            </td>
                            <td class="input" style="padding: 0">
                                <input type="text" name="其它" id="其它" style="border: none; width: 100%; height: 45px;" />
                            </td>
                        </tr>
                        <tr>
                            <td class="strong" style="padding-top: 50px">具体内容描述                                
                            </td>
                            <td class="input" colspan="4" style="padding: 0">
                                <textarea name="具体内容描述" id="具体内容描述" style="border: none; resize: none; width: 100%; height: 208px; padding: 0px; margin: 0px;">
                            </textarea>
                            </td>
                        </tr>
                        <tr>
                            <td class="strong">借用机房
                            </td>
                            <td class="input" style="padding: 0">
                                <select name="借用机房" id="借用机房" style="border: none; width: 100%; height: 45px; padding-left: 4px;">
                                    <option value="计121">计121</option>
                                    <option value="计223">计223</option>
                                    <option value="计315">计315</option>
                                    <option value="计310">计310</option>
                                    <option value="计321">计321</option>
                                </select>
                            </td>
                            <td class="strong">借用时间
                            </td>
                            <td class="input" style="padding: 0; text-align: center;">
                                <input type="text" name="借用具体时间始" id="借用具体时间始" style="border: none; width: 100%; height: 45px;padding-left:4px;" onfocus="HS_setDate(this)" value="@(DateTime.Now.ToString("yyyy-MM-dd"))" />
                            </td>
                            <td style="padding: 0; text-align: center;">
                                <a class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" onclick="FillCourseInfo()" style="height: 45px; width: 100%; padding-top: 8px; padding-bottom: 0px">当天课表查询
                                </a>
                            </td>
                            <td class="input" style="padding: 0; text-align: center;">
                                <select class="selectpicker" data-toggle="dropdown" name="借用具体时间终" id="借用具体时间终" style="border: none; width: 100%; height: 100px;" multiple>
                                    <option value="第1节">第1节</option>
                                    <option value="第2节">第2节</option>
                                    <option value="第3节">第3节</option>
                                    <option value="第4节">第4节</option>
                                    <option value="第5节">第5节</option>
                                    <option value="第6节">第6节</option>
                                    <option value="第7节">第7节</option>
                                    <option value="第8节">第8节</option>
                                    <option value="第9节">第9节</option>
                                    <option value="第10节">第10节</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <button type="submit" class="btn btn-primary btn-lg" style="float: right">提交信息</button>
            </form>
        </div>
    </div>
    <div style="margin-bottom: 20px">
        <h3 style="padding-left: 15px;">备注:</h3>
        <ol>
            <li>此申请表由借用人如实逐项填写，报计算机系实验室管理部审批（补课以及党团、班级、学生会、腾讯俱乐部、辩论赛等活动借用情况只需系实验室管理部审核，如遇承办考试、竞赛、讲座、培训、项目活动等特殊情况需报系领导审批）；审批通过后，持本表到计算机系楼门卫处领取相应机房的钥匙；
            </li>
            <li>教室借用，必须遵守计算机系教学机房管理规定，违反规定者，将取消其使用资格，性质严重者，将上报系里处理；
            </li>
            <li>未办理教室借用手续或擅自延长使用者，一经发现，将承担相关责任；
            </li>
            <li>教室用毕，须将桌椅恢复原位，保持室内清洁。
            </li>

        </ol>
        <p style="text-align: right">系教学实验室联系人：杜正君（13897408428）</p>
    </div>
</div>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">欢迎您，                                                
                  <span>借用日期:</span><span class="date" id="date_" style="color: red;"></span>
                    第<span  id="weekindex" style="color: red;"></span>周
                </h4>
            </div>
            <div class="modal-body" style="padding: 0px;">
                @for (int i = 1; i <= 8; i++)
                {                                                    
                    <div class="col-md-2" style="border: 1px hidden rgb(54, 251, 6); text-align: left;">
                        <div style="height: 50px;font-size:18.7px;line-height: 50px;">第@(i)节:</div>
                    </div>                                                  
                    <div class="col-md-10" style="border: 1px hidden #ddd; text-align: left;">
                        <div id="cindex@(i)" style="color:black; height:50px;line-height: 50px;vertical-align: middle;font-size:18.7px;"></div>
                    </div>
                }
                <div style="clear: both"></div>
            </div>
        </div>
    </div>
</div>
<script>
    function my_refresh() {
        window.location.reload();
    }
    function FillCourseInfo() {
        jQuery.ajax({
            type: "POST",
            url: "@Url.Content("~/CheckSchedule/CheckSchedule")",
            data: { 借用机房: $("#借用机房").val(), 借用日期: $("#借用具体时间始").val() },
            dataType: "json",

            success: function (data) {
                var course = new Array("", data.cindex1, data.cindex2, data.cindex3, data.cindex4, data.cindex5, data.cindex6, data.cindex7, data.cindex8);
                for (var i = 1; i <= 8; i++) {
                    $("#cindex" + i).text(" ");
                    if (course[i] == "null" || course[i] == null)
                        $("#cindex" + i).css("background-color", "rgb(54, 251, 6)");
                    else if (course[i] == "已借用")
                    {
                        $("#cindex" + i).css("background-color", "yellow");
                        $("#cindex" + i).text(course[i] + " ");
                    }
                    else
                    {
                        $("#cindex" + i).css("background-color", "red");
                        $("#cindex" + i).text(course[i] + " ");
                    }
                }
                $(".date").text($("#借用具体时间始").val());
                $("#weekindex").text(data.weekindex);
                /*
                var dt = "2016-11-28";
                var weekIndex = ($("#借用具体时间始").val() - dt) / 7 + 15;
                $("#weekCount").text(weekIndex);
                */
            },
            error: function () {
                alert("error");
            }
        });
    }
</script>

